define(["exports","websockets/binary_websockets","common/util"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c=(local_storage.get("i18n")||{value:"en"}).value,d=b.socket_url+"?app_id="+b.app_id+"&l="+c;a["default"]=function(a){return new Promise(function(b,c){var e=new WebSocket(d);e.addEventListener("open",function(){e.send(JSON.stringify({authorize:a}))}),e.addEventListener("close",function(){}),e.addEventListener("message",function(a){var c=JSON.parse(a.data);b(c.authorize),e.close()}),e.addEventListener("error",function(a){return c(a.error)})})}});