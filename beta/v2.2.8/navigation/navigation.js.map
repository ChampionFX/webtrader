{"version":3,"sources":["../../../../src/navigation/navigation.es6"],"names":["getType","acc","id","loginid","type","MLT","MF","VRTC","VRCH","REAL","currency","toUpperCase","match","initLoginButton","root","account_menu","find","time","state","show_login","local_storage","get","login_disabled","logout_disabled","account","show","balance","is_virtual","show_submenu","show_new_account_link","destroy_windows","data_attribute","each","inx","elm","dlg","dialog","one","_","defer","remove","oauth","map","e","login","app_id","liveapi","disabled","config","oauth_url","window","location","showLoginWin","require","login_win","init","toggleVisibility","value","logout","invalidate","switchAccount","switch_account","catch","err","$","growl","error","message","code","console","log","rv","bind","update_balance","data","authorize","formatPrice","events","on","set","is_current_account_real","getLandingCompany","then","what_todo","show_financial_link","show_realaccount_link","loginIds","loginids","has_real_account","some","is_real","has_mf_or_mlt","is_mf","is_mlt","has_disabled_account","is_disabled","oAuthLoginIds","lockedIds","filter","join","fixed","i18n","replace","text","moment","utc","format","setInterval","initLang","addBack","lang","name","confirm","visible","languages","onclick","reload","contact_us_el","document","getElementById","href","cached","send","website_status","supported_languages","m","toLowerCase","newList","intersectionBy","length","forEach","push","Promise","all","landing_company","country","landing_company_details","landing_company_name","results","virtual_company","financial_company","financial","gaming","gaming_company","curr_login","test","shortcode","is_mx","cr_accts","is_cr","legal_allowed_currencies","currencies_config","has_fiat","crypto_currencies","difference","curr","acct","has_crypto","has_all_crypto","callback","$navHtml","prepend","menu","workspace","is_beta","closest"],"mappings":"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","file":"navigation.js","sourcesContent":["/* Created by Armin on 10/17/2015 */\n\nimport $ from 'jquery';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport liveapi from '../websockets/binary_websockets';\nimport rv from '../common/rivetsExtra';\nimport $navHtml from 'text!./navigation.html';\nimport workspace from '../workspace/workspace.js';\nimport '../common/util';\nimport 'css!navigation/navigation.css';\n\nconst getType = (acc) => {\n   let id = acc.loginid || acc.id;\n   if(!acc || !id) return;\n   const type = {\n         MLT:\"Gaming\", \n         MF:\"Investment\",\n         VRTC:\"Virtual\",\n         VRCH:\"Virtual\",\n         REAL:(acc.currency || '').toUpperCase() || 'Real'\n   };\n   id = id.match(/^(MLT|MF|VRTC|VRCH)/i) ? id.match(/^(MLT|MF|VRTC|VRCH)/i)[0] : \"REAL\";\n   return type[id]+\" Account\";\n};\n\n\nconst initLoginButton = (root) => {\n   const account_menu = root.find('.account-menu');\n   const time = root.find('span.time');\n   const state = {\n      show_login: local_storage.get('oauth') ? false : true,\n      login_disabled: false,\n      currency: '',\n      logout_disabled: false,\n      account: {\n         show:false,\n         type:'',\n         id:'',\n         balance: '',\n         is_virtual:0\n      },\n      show_submenu: false,\n      show_new_account_link: false,\n\n   };\nconst destroy_windows = (data_attribute) => {\n  $(`.webtrader-dialog[${data_attribute}]`).each((inx, elm) => {\n    const dlg = $(elm);\n    dlg.dialog('close');\n    dlg.one('dialogclose', () => {\n      _.defer(() => dlg.dialog('instance') && dlg.dialog('destroy') && dlg.remove());\n    });\n});\n}\n\n   state.oauth = local_storage.get('oauth') || [];\n   state.oauth = state.oauth.map((e) => {\n      e.type = getType(e);\n      return e;\n   });\n   state.login = () => {\n      const app_id = liveapi.app_id;\n      state.login.disabled = true;\n      const config = local_storage.get('config');\n      const oauth_url = (config && config.oauth_url) || 'https://oauth.champion-fx.com/oauth2/authorize';\n      window.location =  oauth_url + '?app_id=' + app_id;\n   }\n   state.showLoginWin = () => {\n      state.login_disabled = true;\n      require(['oauth/login'], (login_win) => {\n         state.login_disabled = false;\n         login_win.init();\n      });\n   };\n   state.login = () => {\n      const app_id = liveapi.app_id;\n      state.login.disabled = true;\n      const config = local_storage.get('config');\n      const oauth_url = (config && config.oauth_url) || 'https://oauth.champion-fx.com/oauth2/authorize';\n      window.location =  oauth_url + '?app_id=' + app_id;\n   }\n   state.toggleVisibility = (value) => {\n      state.show_submenu = value;\n   };\n\n   state.logout = () => {\n      liveapi.invalidate();\n      state.logout_disabled = true;\n   };\n\n   state.switchAccount = (id) => {\n      destroy_windows('data-account-specific=true');\n      liveapi.switch_account(id)\n         .catch((err) => {\n            $.growl.error({message: err.message});\n            // logout user if he decided to self exclude himself.\n            if(err.code===\"SelfExclusion\"){\n               console.log(\"logging out because of self exclude\");\n               liveapi.invalidate();\n            }\n         });\n   }\n\n   rv.bind(account_menu, state);\n\n   const update_balance = (data) => {\n      if (!state.currency) {\n         /* We're not going to set currency automatically, since the user might select a different currency  */\n         if (local_storage.get(\"currency\")){\n            state.currency = local_storage.get(\"currency\");\n          } else \n            return;\n      }\n\n      let value = '0';\n      if (data.authorize) value = data.authorize.balance;\n      else value = data.balance ? data.balance.balance : '0';\n\n      state.account.balance = formatPrice(value, state.currency);\n   };\n\n   /* update balance on change */\n   liveapi.events.on('balance', update_balance);\n\n   liveapi.events.on('logout', () => {\n      destroy_windows('data-authorized=true');\n      destroy_windows('data-account-specific=true');\n      /* destroy all authorized dialogs */\n      state.logout_disabled = false;\n      state.account.show = false;\n      state.show_login = true;\n      state.account.id = '';\n      state.account.balance = '';\n      state.account.type = '';\n      state.currency = '';\n\n      local_storage.remove(\"currency\");\n   });\n\n   liveapi.events.on('login', (data) => {\n      destroy_windows('data-authorized=true');\n      /* destroy all authorized dialogs */\n      state.show_login = false;\n      state.account.show = true;\n      state.account.id = data.authorize.loginid;\n      state.account.is_virtual = data.authorize.is_virtual;\n      state.oauth = local_storage.get('oauth') || [];\n      state.oauth = state.oauth.map((e) => {\n         e.type = getType(e);\n         return e;\n      });\n      state.account.type = getType(data.authorize);\n\n      state.currency = data.authorize.currency;\n      local_storage.set(\"currency\", state.currency);\n      update_balance(data);\n      const is_current_account_real = data.authorize.is_virtual === 0;\n\n      getLandingCompany().then((what_todo) => {\n         state.show_financial_link = (what_todo === 'upgrade-mf');\n         state.show_realaccount_link = (what_todo === 'upgrade-mlt');\n         const loginIds = loginids();\n         state.has_real_account = _.some(loginIds, {is_real: true});\n         state.has_mf_or_mlt = _.some(loginIds, {is_mf: true}) || _.some(loginIds, {is_mlt: true});\n         state.show_new_account_link = what_todo === 'new-account';\n         state.has_disabled_account =  _.some(loginIds, {is_disabled: true});\n\n         // https://trello.com/c/9PCHncnx/5146-8-raunak-accountlistordering\n         // https://trello.com/c/fNZ1Zkbb/2529-negar-accountlistauthorize\n         if(_.some(oAuthLoginIds(), {is_disabled: true})) {\n            const lockedIds = _.filter(loginIds, {is_disabled:true}).map(acc => acc.id).join(',');\n            $.growl.error({\n               fixed: true,\n               message:\"<a href='https://www.champion-fx.com/en/contact.html' target='_blank'>\"\n               + \"Your account(%) is locked, please contact customer support for more info.\".i18n().replace('%', lockedIds)\n               + \"</a>\"\n            });\n         }\n      });\n   });\n\n   // Restore login-button in case of login-error\n   $('.login').on(\"login-error\", (e) => {\n      console.log(\"Encountered login error\");\n      state.show_login = true;\n   });\n\n   /* update time every second */\n   time.text(moment.utc().format('YYYY-MM-DD HH:mm:ss') + ' GMT');\n   setInterval(() => {\n      time.text(moment.utc().format('YYYY-MM-DD HH:mm:ss') + ' GMT');\n   }, 1000);\n}\n\nconst initLang = (root) => {\n   root = root.find('#topbar').addBack('#topbar');\n   const state = {\n      lang: {\n         value: 'en', name: 'English'\n      },\n      confirm: {\n         visible: false\n      },\n      languages: [\n         { value: 'en', name: 'English'},\n         { value: 'ar', name: 'Arabic'},\n         { value: 'de', name: 'Deutsch'},\n         { value: 'es', name: 'Español'},\n         { value: 'fr', name: 'Français'},\n         { value: 'id', name: 'Indonesia'},\n         { value: 'it', name: 'Italiano'},\n         { value: 'pl', name: 'Polish'},\n         { value: 'pt', name: 'Português'},\n         { value: 'ru', name: 'Русский'},\n         { value: 'th', name: 'Thai'},\n         { value: 'vi', name: 'Tiếng Việt'},\n         { value: 'zh_cn', name: '简体中文'},\n         { value: 'zh_tw', name: '繁體中文'}\n      ]\n   };\n\n   state.onclick = (value) => {\n      state.confirm.visible = false;\n      const lang = _.find(state.languages, {value: value});\n      if(lang && state.lang && lang.value == state.lang.value)\n         return;\n\n      local_storage.set('i18n', {value: lang.value});\n      window.location.reload();\n   };\n\n   state.toggleVisibility = (visible) => {\n      state.confirm.visible = visible;\n   }\n\n   const value = (local_storage.get('i18n') || {value: 'en'}).value;\n   state.lang = _.find(state.languages, {value: value}); // set the initial state.\n\n   const contact_us_el = document.getElementById('contact-us');\n   contact_us_el.href = `https://www.binary.com/${value}/contact.html`;\n\n   rv.bind(root[0], state);\n\n   //Init the trigger of loading language list from server\n   liveapi\n      .cached\n      .send({website_status: 1})\n      .then((data) => {\n         let supported_languages = (data.website_status || {}).supported_languages || [];\n         supported_languages = _.map(supported_languages, (m) => ({value: m.toLowerCase()}));\n         const newList = _.intersectionBy(state.languages, supported_languages, 'value') || [];\n         state.languages.length = 0;\n         newList.forEach(\n            (e) => state.languages.push(e)\n         );\n      })\n      .catch(console.error)\n\n}\n\n/*\n  1: company = (gaming company) && (financial company && financial company shortcode = maltainvest)\n     a: no MLT account  ==> upgrade to MLT\n     b: has MLT account\n        I:     upgrade to MF\n    c: has both MLT & MF ==> do nothing\n  2: company = financial company &&  financial company shortcode = maltainvest) && there is NO gaming company\n     a: no MF account\n        I: company = financial ==> upgrade to MF\n     b: has MF account => do nothing\n  3: company & shortcode anything except above\n     a: no MLT, MX, CR account ==> upgrade to MLT, MX or CR\n     b: has MLT, MX ==> do nothing\n  4: company shortcode == japan\n     a: do nothing and show an error message\n  5: shortcode = costarica\n     a: No currency\n       I: Do nothing.\n     b: Fiat currency && Not all crypto currency account\n       I: Allow crypto account\n     c: Crypto currency account && No fiat currency account\n      I: Allow fiat account\n     d: Fiat && all crypto account\n      I: do nothing.\n  returns 'upgrade-mlt' | 'upgrade-mf' | 'do-nothing' | 'new_account'\n*/\nexport const getLandingCompany = () => {\n   return liveapi.cached.authorize().then((data) => {\n      return Promise.all([\n            liveapi.cached.send({landing_company: data.authorize.country }),\n            liveapi.cached.send({landing_company_details: data.authorize.landing_company_name})\n         ])\n         .then((results) => {\n            const data = results[0];\n            const landing_company_details = data.landing_company.virtual_company === 'virtual' ?\n              data.landing_company.financial_company || {} :\n              results[1].landing_company_details || {};\n            const financial = data.landing_company.financial_company;\n            const gaming = data.landing_company.gaming_company;\n            const loginIds = loginids();\n            const curr_login = local_storage.get(\"oauth\")[0];\n            curr_login.is_mlt = /MLT/.test(curr_login.id);\n            if (gaming && financial && financial.shortcode === 'maltainvest') { // 1:\n               if (_.some(loginIds, {is_mlt: true}) && (_.some(loginIds, {is_mf: true}) || !curr_login.is_mlt)) // 1-c\n                  return 'do-nothing';\n               if (_.some(loginIds, {is_mlt: true})) // 1-b\n                  return 'upgrade-mf';\n               return 'upgrade-mlt'; // 1-a\n            }\n            if (financial && financial.shortcode === 'maltainvest' && !gaming) { // 2:\n               if (_.some(loginIds, {is_mf: true})) // 2-b\n                  return 'do-nothing';\n               return 'upgrade-mf'; // 2-a\n            }\n            // 3:\n            if (_.some(loginIds, {is_mlt: true}) || _.some(loginIds, {is_mx: true}))\n               return 'do-nothing'; // 3-b\n            // 4: never happens, japan accounts are not able to log into webtrader.\n            // 5:\n            const cr_accts = _.filter(loginIds, {is_cr: true});\n            if( cr_accts.length && landing_company_details.legal_allowed_currencies) {\n               const currencies_config = local_storage.get(\"currencies_config\") || {};\n               const has_fiat = _.some(cr_accts, {type: 'fiat'});\n               const crypto_currencies = _.difference(\n                  landing_company_details.legal_allowed_currencies.filter((curr) => {\n                     return currencies_config[curr].type === 'crypto';\n                  }),\n                  _.filter(cr_accts, {type: 'crypto'}).map((acct) => acct.currency)\n               );\n               const has_crypto = crypto_currencies.length && crypto_currencies.length !== (landing_company_details.legal_allowed_currencies.filter((curr) => {\n                  return currencies_config[curr].type === 'crypto';\n               }) || []).length;\n               const has_all_crypto = !crypto_currencies.length;\n               if((!has_fiat && has_crypto) || (has_fiat && !has_all_crypto)) {\n                  return 'new-account'; // 5-b and 5-c\n               }\n               return 'do-nothing'; // 5-d\n            }\n            return 'upgrade-mlt'; // 3-a (calls the normal account opening api which creates an mlt, mx or cr account).\n         });\n   });\n}\n\nexport const init = (callback) => {\n   const root = $($navHtml).i18n();\n   $(\"body\").prepend(root);\n\n   initLoginButton(root);\n   initLang(root);\n\n   //Load theme settings ...\n   require(['themes/themes']);\n\n   $('#nav-menu .resources > ul').menu();\n   workspace.init($('#nav-menu .workspace'));\n\n   if (callback) {\n      callback($(\"#nav-menu\"));\n   }\n\n   //Show config <LI> if its production and not BETA\n   if (is_beta()) {\n      root.find(\"a.config\").closest('li').show();\n   }\n}\n\nexport default {\n   init,\n   getLandingCompany\n};\n\n"]}